# First Implementation Draft
実装草案のこのバージョンは、成功したハンドシェイクと問題のないコネクションクローズに集中し、
TLS 1.3に対する統合を要求します。アプリケーションデータは交換されません。
不可能とまでは言いませんがQUICの実装は難く、
この段階では、私達は1 RTT ハンドシェイクに重点を置くとします。
具体的には

・　バージョン　ネゴシエーション - すべてのサーバ実装はのバージョンと任意のペイロード
そして、バージョンネゴシエーション付きのレスポンスを取り扱います。
　すべてのクライアント実装はバージョン ネゴシエーション パケットを消費し、
失敗するか互換性のあるバージョンを選択するかのどちらかを行います。
ただ一つのバージョンが実装されることを期待しますが、クライアントは潤滑に実装しても良いです(MAY)

・　基本的なパケット化と信頼性
これらを含みます

  ・ストリーム番号 0における、STREAMフレームのパケット化
  ・非暗号化パケットにおける、それらのパケットの転送。
  ・レスポンスにおける、Ackフレームの送信 (非暗号化パケットにおいて、タイムスタンプは送られません)
  ・遅延Ackタイマーの実装は必要ではありません
  ・Ackフレームを処理するとき、再送バッファからのAckフレームの除去
  ・応答しないハンドシェイクパケットのタイムベース再送

      Note:
      このパートにおいて、送信者はRTTを計測する必要はなく、応答しないハンドシェイクパケットへの
      再送のために一定時間のタイマーを使って良いです。
      受信者は順不同のパケットを受け取り 、紛失したパケットを示すAckフレームを生成出来るなくていけません。

  ・ 基本的なストリームの送受信
    以下を含む

    ・ ハンドシェイクのためのストリームデータの受理とSTREAMフレーム
    ・ 受信したSTREAMフレームからバイトのストリームデータの収集
      Note:
      このパートにおいて、受信者は抜けや重複のある受信したSTREAMデータを並べ替えなくてはいけません。
      特に、受信者は送信者にたおして再送されたSTREAMデータを送り込むことを許容しなくてはいけません。
      これは、受け取ったSTREAMフレームはすでに受け取ったデータを含んでいてもよいし、
      失われていてもよいことを意味します。

  ・TLS 1.3ハンドシェイクとの統合 -
    基本的な 1 RTT 様式はサポートされなくてはいけません。
    トランスポートパラメータの交換とセッションチケットは必要でははりません。
    基本的な鍵交換で十分であり、実装はなんらかの証明書を使うことが出来ます。
    TLS提供者は1 RTT鍵の仕様のために必要です。TLS1.3に記載されたすべてのMTIアルゴリズムが期待されます。
    クライアントはP-256の鍵交換を要求しなくてはいけません（MUST)。サーバは共有を受け入れなくてはいけません(MUST)
    (これはHelloRetryRequestが必要になることを避けるためです)

  ・平文の認証
    FNV-1a 認証が必要です。実装は検証し、正しくないパケットを廃棄することを期待されます。

  ・ PADDINGフレーム -
    最初のクライアントパケットは1280オクテットのパディングがされます。
    (サーバの都合のいいように制限は管理されます)

  ・Connection ID -
     サーバは新しいConnection IDを選ぶべきです。もしクライアントが選んだものでと同じならいいです。が、
     サーバが実装しているかクライアントがそれの現象を取り扱えるかを知ることは難しいです。
     私達は少なくとも新しいConnection IDを選ぶ実装を少なくとも欲します。

  ・パケットの保護 -
    すべてのハンドシェイクのパケットの送信は1RTT鍵により送られ、保護される。

   ・Connection Close -
     実装はハンドシェイクが完遂したのち、コネクションを閉じなくてはいけません。
     これは直後であってもタイマーののちでもかまいません。
     ピアーはコネクションクローズパケットの処理しまたコネクションを閉じなくてはいけません。
     コネクションクローズパケットはパケット保護を用いなくてはいけません。
     コネクションクローズを含むパケットは再送する必要がありません。
     実装はこれを発生させるかピアーからのクローズを待つための設定をもつべきです。

    ・すべてのフレームのためのフレーム解析 -
    送信者が使われることを期待されないフレームを受け取ることを禁止するより、
    受信者がすべての定義済みのフレームタイプを受け取らなくてはいかえません。
    実装は明確にスキップできるとしてもすべてのフレームタイプを解析する必要があります。


